import{r as o,j as e,aa as S,o as p,al as C,aA as P,F as z,L as F,aE as E,ae as D,ai as L}from"./react-vendor-f6cd2f28.js";import{u as $,b as A,f as y,L as N,a as _}from"./index-93e771d7.js";import{B}from"./Button-85468c44.js";import{aw as b}from"./vendor-662f24ba.js";const I=L(b),G=()=>{const g=$(),{products:l,loading:v,error:u}=A(t=>t.products),[h,f]=o.useState(null),[d,k]=o.useState(""),[s,m]=o.useState("all");o.useEffect(()=>{g(y({}))},[g]);const j=o.useMemo(()=>l.filter(t=>{const r=t.name.toLowerCase().includes(d.toLowerCase()),n=s==="all"||s==="in-stock"&&t.stock>0||s==="out-of-stock"&&t.stock===0;return r&&n}),[l,d,s]),i=o.useMemo(()=>{const t=l.length,r=l.filter(a=>a.stock>0).length,n=l.filter(a=>a.stock===0).length,c=l.reduce((a,x)=>a+x.price*x.stock,0);return{total:t,inStock:r,outOfStock:n,totalValue:c}},[l]),w=async(t,r)=>{var c,a;if((await I.fire({title:`Delete "${r}"?`,text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed){f(t);try{await _.delete(`/products/${t}`),b.fire("Deleted!","Product has been deleted.","success"),g(y({}))}catch(x){b.fire("Error",((a=(c=x.response)==null?void 0:c.data)==null?void 0:a.message)||"Failed to delete product","error")}finally{f(null)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black font-display text-gray-900 mb-1",children:"Products Management"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manage your product catalog"})]}),e.jsxs(B,{to:"/admin/products/create",className:"flex items-center gap-2 bg-primary-900 hover:bg-black text-white px-6 py-3 rounded-xl font-bold shadow-lg hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx(S,{size:20})," Add Product"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-500 text-white p-3 rounded-lg",children:e.jsx(p,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-600 font-bold uppercase tracking-wide",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-black text-blue-900",children:i.total})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-500 text-white p-3 rounded-lg",children:e.jsx(p,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600 font-bold uppercase tracking-wide",children:"In Stock"}),e.jsx("p",{className:"text-2xl font-black text-green-900",children:i.inStock})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border border-red-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-red-500 text-white p-3 rounded-lg",children:e.jsx(C,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-red-600 font-bold uppercase tracking-wide",children:"Out of Stock"}),e.jsx("p",{className:"text-2xl font-black text-red-900",children:i.outOfStock})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-purple-500 text-white p-3 rounded-lg",children:e.jsx(P,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-600 font-bold uppercase tracking-wide",children:"Inventory Value"}),e.jsxs("p",{className:"text-2xl font-black text-purple-900",children:[i.totalValue.toLocaleString()," EGP"]})]})]})})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search products by name...",value:d,onChange:t=>k(t.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-900 focus:ring-2 focus:ring-primary-100 transition-all outline-none font-medium"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>m("all"),className:`px-5 py-3 rounded-xl font-bold text-sm transition-all ${s==="all"?"bg-primary-900 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All"}),e.jsx("button",{onClick:()=>m("in-stock"),className:`px-5 py-3 rounded-xl font-bold text-sm transition-all ${s==="in-stock"?"bg-green-500 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"In Stock"}),e.jsx("button",{onClick:()=>m("out-of-stock"),className:`px-5 py-3 rounded-xl font-bold text-sm transition-all ${s==="out-of-stock"?"bg-red-500 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Out of Stock"})]})]})}),v?e.jsx("div",{className:"flex justify-center p-12 bg-white rounded-2xl border border-gray-100",children:e.jsx(N,{size:"lg"})}):u?e.jsx("div",{className:"text-red-600 bg-red-50 p-6 rounded-2xl border-2 border-red-100 font-semibold",children:u}):e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:j.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(p,{className:"mx-auto text-gray-300 mb-4",size:64}),e.jsx("p",{className:"text-gray-500 font-medium",children:d||s!=="all"?"No products match your filters.":"No products found. Add one to get started!"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase tracking-wider",children:"Product"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-black text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:j.map(t=>{var r;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-xl overflow-hidden border-2 border-gray-200 group-hover:border-primary-300 transition-all shadow-sm group-hover:shadow-lg",children:e.jsx("img",{src:t.images&&t.images.length>0?t.images[0]:"https://via.placeholder.com/64",alt:t.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 group-hover:text-primary-900 transition-colors",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ID: ",t._id.slice(-8).toUpperCase()]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-black text-lg text-gray-900",children:[t.price," EGP"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-xs font-bold border border-blue-200",children:((r=t.category)==null?void 0:r.name)||"Uncategorized"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-xs font-black border-2 ${t.stock>0?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:t.stock>0?`${t.stock} in stock`:"Out of Stock"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(F,{to:`/admin/products/${t._id}/edit`,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-xl transition-all font-bold text-sm border-2 border-blue-200 hover:border-blue-300 hover:shadow-md transform hover:scale-105",title:"Edit",children:[e.jsx(E,{size:16})," Edit"]}),e.jsx("button",{onClick:()=>w(t._id,t.name),disabled:h===t._id,className:`inline-flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 hover:bg-red-100 rounded-xl transition-all font-bold text-sm border-2 border-red-200 hover:border-red-300 hover:shadow-md transform hover:scale-105 ${h===t._id?"opacity-50 cursor-not-allowed":""}`,title:"Delete",children:h===t._id?e.jsx(N,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(D,{size:16})," Delete"]})})]})})]},t._id)})})]})})})]})};export{G as default};
