import{e as z,a8 as I,r as o,Q as l,j as e,ad as E,ar as B,aK as T,ay as M,s as U,a6 as q,o as L,aA as G,ac as J,ax as R,a1 as W}from"./react-vendor-f6cd2f28.js";import{a as b}from"./index-93e771d7.js";import{I as j}from"./Input-b13869b6.js";import{B as $}from"./Button-85468c44.js";import"./vendor-662f24ba.js";const V=()=>{const m=z(),{id:g}=I(),i=!!g,[a,x]=o.useState({name:"",description:"",category:"T-Shirt",price:"0",tags:"",isActive:!0}),[p,f]=o.useState(null),[v,h]=o.useState(""),[w,F]=o.useState(""),[k,y]=o.useState(!1),[u,N]=o.useState(!1);o.useEffect(()=>{i&&g&&C()},[g,i]);const C=async()=>{var n,r;try{y(!0);const{data:t}=await b.get(`/designs/${g}`);if(t.success){const s=t.data;x({name:s.name,description:s.description||"",category:s.category,price:s.price.toString(),tags:s.tags.join(", "),isActive:s.isActive}),F(s.image),h(s.image)}}catch(t){console.error("Error fetching design:",t),l.error(((r=(n=t.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to load design"),m("/admin/designs")}finally{y(!1)}},c=n=>{const{name:r,value:t,type:s}=n.target;if(s==="checkbox"){const d=n.target;x(A=>({...A,[r]:d.checked}))}else x(d=>({...d,[r]:t}))},D=n=>{var t;const r=(t=n.target.files)==null?void 0:t[0];if(r){if(!r.type.startsWith("image/")){l.error("Please select a valid image file");return}if(r.size>5*1024*1024){l.error("Image size must be less than 5MB");return}f(r);const s=new FileReader;s.onloadend=()=>{h(s.result)},s.readAsDataURL(r)}},S=()=>{f(null),h(w||"")},P=async n=>{var r,t;if(n.preventDefault(),!a.name.trim()){l.error("Please enter design name");return}if(!i&&!p){l.error("Please select an image");return}if(parseFloat(a.price)<0){l.error("Price must be a positive number");return}try{N(!0);const s=new FormData;s.append("name",a.name.trim()),s.append("description",a.description.trim()),s.append("category",a.category),s.append("price",a.price),s.append("isActive",a.isActive.toString()),s.append("tags",a.tags.trim()),p&&s.append("image",p);let d;i?d=await b.put(`/designs/${g}`,s,{headers:{"Content-Type":"multipart/form-data"}}):d=await b.post("/designs",s,{headers:{"Content-Type":"multipart/form-data"}}),d.data.success&&(l.success(i?"Design updated successfully":"Design added successfully"),m("/admin/designs"))}catch(s){console.error("Error submitting design:",s),l.error(((t=(r=s.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to save design")}finally{N(!1)}};return k?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>m("/admin/designs"),className:"p-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all transform hover:scale-105",children:e.jsx(E,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-xl ${i?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:i?e.jsx(B,{size:24}):e.jsx(T,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900",children:i?"Edit Design":"Add New Design"}),e.jsx("p",{className:"text-sm text-gray-500",children:i?"Update design information":"Create a new custom design"})]})]})]})}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-purple-100 text-purple-600 p-3 rounded-xl",children:e.jsx(M,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Design Image"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Upload a high-quality image"})]})]}),v?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:v,alt:"Preview",className:"w-full max-w-md h-auto object-cover rounded-2xl border-4 border-gray-200 shadow-lg"}),e.jsx("button",{type:"button",onClick:S,className:"absolute top-4 right-4 p-3 bg-red-600 text-white rounded-full hover:bg-red-700 transition-all shadow-lg transform hover:scale-110",children:e.jsx(U,{size:20})})]}):e.jsxs("div",{className:"border-3 border-dashed border-gray-300 rounded-2xl p-12 text-center hover:border-purple-500 hover:bg-purple-50 transition-all cursor-pointer group",children:[e.jsx("input",{type:"file",id:"image",accept:"image/*",onChange:D,className:"hidden"}),e.jsxs("label",{htmlFor:"image",className:"cursor-pointer",children:[e.jsx(q,{className:"mx-auto text-gray-400 group-hover:text-purple-600 mb-4 transition-colors",size:64}),e.jsx("p",{className:"text-lg font-bold text-gray-700 group-hover:text-purple-700 mb-2",children:"Click to upload image"}),e.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG, WEBP (Max 5MB)"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-3 rounded-xl",children:e.jsx(L,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Basic Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Design details and description"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{label:"Design Name",type:"text",name:"name",value:a.name,onChange:c,placeholder:"e.g., Modern Design 001",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:a.description,onChange:c,rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-900 outline-none transition-all resize-none font-medium",placeholder:"Brief description of the design..."})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-green-100 text-green-600 p-3 rounded-xl",children:e.jsx(G,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Category & Pricing"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Set category and price"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Category"}),e.jsxs("select",{name:"category",value:a.category,onChange:c,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-primary-100 focus:border-primary-900 outline-none font-bold text-gray-700",required:!0,children:[e.jsx("option",{value:"T-Shirt",children:"T-Shirt"}),e.jsx("option",{value:"Shirt",children:"Shirt"}),e.jsx("option",{value:"Pants",children:"Pants"}),e.jsx("option",{value:"Jacket",children:"Jacket"}),e.jsx("option",{value:"Accessories",children:"Accessories"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsx(j,{label:"Price (EGP)",type:"number",name:"price",value:a.price,onChange:c,min:"0",step:"0.01",placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-orange-100 text-orange-600 p-3 rounded-xl",children:e.jsx(J,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Tags & Status"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Additional details"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{label:"Tags (comma separated)",type:"text",name:"tags",value:a.tags,onChange:c,placeholder:"e.g., modern, sports, casual"}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border-2 border-green-200",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:a.isActive,onChange:c,className:"w-6 h-6 text-green-600 border-gray-300 rounded focus:ring-green-500"}),e.jsx("label",{htmlFor:"isActive",className:"text-sm font-black text-gray-900 cursor-pointer",children:"Design is active and available to customers"})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx($,{type:"submit",isLoading:u,fullWidth:!0,className:"bg-green-600 hover:bg-green-700 text-white font-black py-4 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105",children:u?e.jsx(e.Fragment,{children:"Saving..."}):e.jsx(e.Fragment,{children:i?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"inline mr-2",size:20})," Update Design"]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"inline mr-2",size:20})," Add Design"]})})}),e.jsx("button",{type:"button",onClick:()=>m("/admin/designs"),disabled:u,className:"px-8 py-4 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all font-black disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})})]})]})};export{V as default};
