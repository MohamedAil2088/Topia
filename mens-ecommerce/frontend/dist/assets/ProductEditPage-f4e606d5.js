import{a8 as ce,e as de,r as a,j as e,ad as me,ar as xe,o as F,aA as T,s as V,ay as ge,aF as ue,ax as pe}from"./react-vendor-fdd07533.js";import{u as he,b as be,o as fe,L as je,a as f}from"./index-f5a8800a.js";import{I as m}from"./Input-fc81ecfd.js";import{B as W}from"./Button-30561157.js";import"./vendor-28c12e7b.js";const ke=()=>{const{id:x}=ce(),j=de(),z=he(),[v,E]=a.useState(""),[i,D]=a.useState(""),[q,B]=a.useState(""),[y,I]=a.useState(""),[p,A]=a.useState(""),[g,N]=a.useState([]),[G,P]=a.useState(!1),[H,L]=a.useState(!1),[c,w]=a.useState([]),[n,k]=a.useState([]),J=["XS","S","M","L","XL","XXL","3XL"],Q=[{name:"Black",value:"#000000"},{name:"White",value:"#FFFFFF"},{name:"Gray",value:"#808080"},{name:"Navy",value:"#001f3f"},{name:"Red",value:"#FF4136"},{name:"Blue",value:"#0074D9"},{name:"Green",value:"#2ECC40"},{name:"Yellow",value:"#FFDC00"},{name:"Orange",value:"#FF851B"},{name:"Purple",value:"#B10DC9"},{name:"Pink",value:"#F012BE"},{name:"Brown",value:"#8B4513"}],[d,h]=a.useState(""),[C,b]=a.useState(""),[U,X]=a.useState({}),[S,M]=a.useState(!1),[O,R]=a.useState("50"),[_,$]=a.useState("50"),o=!!x,{product:t,loading:Y}=be(s=>s.products);a.useEffect(()=>{o&&x&&z(fe(x))},[z,x,o]),a.useEffect(()=>{var s,r;if(o&&t){E(t.name),D(t.price.toString()),B(t.description);const l=typeof t.category=="object"?t.category._id:t.category;if(I(l||""),A(t.stock.toString()),N(t.images||[]),w(t.sizes||[]),k(t.colors||[]),t.salePrice){h(t.salePrice.toString());const u=((t.price-t.salePrice)/t.price*100).toFixed(0);b(u)}M(t.isCustomizable||!1),t.customizationPricing&&(R(((s=t.customizationPricing.frontPrint)==null?void 0:s.toString())||"50"),$(((r=t.customizationPricing.backPrint)==null?void 0:r.toString())||"50"))}},[t,o]);const[K,Z]=a.useState([]);a.useEffect(()=>{(async()=>{try{const{data:r}=await f.get("/categories");Z(r.data||r)}catch(r){console.error("Failed to fetch categories",r)}})()},[]);const ee=async s=>{const r=s.target.files[0],l=new FormData;l.append("image",r),P(!0);try{const u={headers:{"Content-Type":"multipart/form-data"}},{data:oe}=await f.post("/upload",l,u);N(ne=>[...ne,oe]),P(!1)}catch(u){console.error(u),P(!1)}},se=s=>{N(g.filter((r,l)=>l!==s))},re=s=>{c.includes(s)?w(c.filter(r=>r!==s)):w([...c,s])},te=s=>{n.includes(s)?k(n.filter(r=>r!==s)):k([...n,s])},ae=s=>{if(h(s),s&&i){const r=((Number(i)-Number(s))/Number(i)*100).toFixed(0);b(r)}else b("")},ie=s=>{if(b(s),s&&i){const r=(Number(i)*(1-Number(s)/100)).toFixed(2);h(r)}else h("")},le=async s=>{s.preventDefault();const r={};if(v.trim()||(r.name="Product name is required"),(!i||Number(i)<=0)&&(r.price="Valid price is required"),(!p||Number(p)<0)&&(r.stock="Valid stock is required"),y||(r.category="Category is required"),g.length===0&&(r.images="At least one image is required"),d&&Number(d)>=Number(i)&&(r.salePrice="Sale price must be less than regular price"),Object.keys(r).length>0){X(r);return}X({}),L(!0);try{const l={name:v,price:Number(i),description:q,category:y,stock:Number(p),images:g,sizes:c,colors:n,salePrice:d?Number(d):void 0,isCustomizable:S,customizationPricing:{frontPrint:Number(O),backPrint:Number(_)}};o?await f.put(`/products/${x}`,l):await f.post("/products",l),j("/admin/products")}catch(l){console.error(l),alert("Failed to save product")}finally{L(!1)}};return o&&Y?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(je,{size:"lg"})}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>j("/admin/products"),className:"p-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all transform hover:scale-105",children:e.jsx(me,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black font-display text-gray-900 flex items-center gap-3",children:o?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"text-blue-600"})," Edit Product"]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"text-green-600"})," Create New Product"]})}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:o?"Update product information":"Add a new product to your catalog"})]})]})})}),e.jsxs("form",{onSubmit:le,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-3 rounded-xl",children:e.jsx(F,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Basic Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Product name, category, and description"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{label:"Product Name",value:v,onChange:s=>E(s.target.value),required:!0,placeholder:"e.g., Premium Cotton T-Shirt"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Category"}),e.jsxs("select",{className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:ring-4 focus:ring-primary-100 focus:border-primary-900 outline-none transition-all font-medium text-gray-900 bg-white",value:y,onChange:s=>I(s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),K.map(s=>e.jsx("option",{value:s._id,children:s.name},s._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Description"}),e.jsx("textarea",{className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:ring-4 focus:ring-primary-100 focus:border-primary-900 outline-none transition-all h-32 font-medium resize-none",value:q,onChange:s=>B(s.target.value),placeholder:"Describe your product in detail...",required:!0})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-green-100 text-green-600 p-3 rounded-xl",children:e.jsx(T,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Pricing & Inventory"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Set product price and stock quantity"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(m,{label:"Price (EGP)",type:"number",value:i,onChange:s=>D(s.target.value),required:!0,placeholder:"0.00",min:"0",step:"0.01"}),e.jsx(m,{label:"Stock Quantity",type:"number",value:p,onChange:s=>A(s.target.value),required:!0,placeholder:"0",min:"0"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-orange-100 text-orange-600 p-3 rounded-xl",children:e.jsx(T,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Sales & Discounts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Set sale price and discount percentage (optional)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{label:"Sale Price (EGP)",type:"number",value:d,onChange:s=>ae(s.target.value),placeholder:"Leave empty for no sale",min:"0",step:"0.01"}),U.salePrice&&e.jsxs("p",{className:"text-red-600 text-xs font-bold mt-1 flex items-center gap-1",children:["âš ï¸ ",U.salePrice]})]}),e.jsx("div",{children:e.jsx(m,{label:"Discount Percentage (%)",type:"number",value:C,onChange:s=>ie(s.target.value),placeholder:"0",min:"0",max:"100",step:"1"})})]}),d&&e.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl border-2 border-orange-200",children:[e.jsx("p",{className:"text-sm font-bold text-gray-700 mb-2",children:"Price Preview:"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-lg font-black line-through text-gray-400",children:[i," EGP"]}),e.jsxs("span",{className:"text-2xl font-black text-orange-600",children:[d," EGP"]}),C&&e.jsxs("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-xs font-black",children:[C,"% OFF"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-indigo-100 text-indigo-600 p-3 rounded-xl",children:e.jsx(F,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Available Sizes"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Select all sizes available for this product"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:J.map(s=>e.jsx("button",{type:"button",onClick:()=>re(s),className:`px-6 py-3 rounded-xl font-black text-sm transition-all transform hover:scale-105 border-2 ${c.includes(s)?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-gray-700 border-gray-300 hover:border-indigo-400"}`,children:s},s))}),c.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-indigo-50 rounded-xl border border-indigo-200",children:e.jsxs("p",{className:"text-sm font-bold text-indigo-900",children:["Selected: ",e.jsx("span",{className:"text-indigo-600",children:c.join(", ")})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-pink-100 text-pink-600 p-3 rounded-xl text-2xl",children:"ðŸŽ¨"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Available Colors"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Select all colors available for this product"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:Q.map(s=>e.jsxs("button",{type:"button",onClick:()=>te(s.name),className:`group relative p-4 rounded-xl transition-all transform hover:scale-105 border-3 ${n.includes(s.name)?"border-pink-600 shadow-xl ring-4 ring-pink-100":"border-gray-200 hover:border-pink-300"}`,children:[e.jsx("div",{className:"w-full aspect-square rounded-lg mb-2 shadow-md",style:{backgroundColor:s.value}}),e.jsx("p",{className:"text-xs font-black text-gray-700 text-center",children:s.name}),n.includes(s.name)&&e.jsx("div",{className:"absolute top-2 right-2 bg-pink-600 text-white rounded-full p-1 shadow-lg",children:e.jsx(V,{size:12})})]},s.name))}),n.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-pink-50 rounded-xl border border-pink-200",children:e.jsxs("p",{className:"text-sm font-bold text-pink-900",children:["Selected Colors: ",e.jsx("span",{className:"text-pink-600",children:n.join(", ")})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-purple-100 text-purple-600 p-3 rounded-xl",children:e.jsx(ge,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Product Images"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Upload high-quality images (recommended: 800x1000px)"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 px-4 transition bg-gray-50 border-3 border-gray-300 border-dashed rounded-2xl appearance-none cursor-pointer hover:border-primary-500 hover:bg-primary-50 focus:outline-none group",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx(ue,{className:"w-16 h-16 text-gray-400 group-hover:text-primary-600 transition-colors mb-3"}),e.jsx("span",{className:"font-bold text-gray-700 group-hover:text-primary-900 transition-colors",children:G?"Uploading...":"Drop files here or click to browse"}),e.jsx("span",{className:"text-xs text-gray-500 mt-2",children:"PNG, JPG or WEBP (MAX. 5MB)"})]}),e.jsx("input",{type:"file",name:"image",className:"hidden",onChange:ee,disabled:G,accept:"image/*"})]})}),g.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:g.map((s,r)=>e.jsxs("div",{className:"relative aspect-square bg-gray-100 rounded-2xl overflow-hidden border-3 border-gray-200 group hover:border-primary-500 transition-all shadow-sm hover:shadow-lg",children:[e.jsx("img",{src:s,alt:`Product ${r+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),e.jsx("button",{type:"button",onClick:()=>se(r),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-2 opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110 hover:bg-red-600 shadow-lg",title:"Remove image",children:e.jsx(V,{size:16})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/50 to-transparent p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("p",{className:"text-white text-xs font-bold",children:["Image ",r+1]})})]},r))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("input",{type:"checkbox",id:"isCustomizable",className:"w-6 h-6 text-primary-600 border-2 border-gray-300 rounded-lg focus:ring-4 focus:ring-primary-100 transition-all cursor-pointer",checked:S,onChange:s=>M(s.target.checked)}),e.jsx("label",{htmlFor:"isCustomizable",className:"text-base font-black text-gray-900 cursor-pointer select-none",children:"ðŸŽ¨ Enable Custom Design Options (Allow customers to upload their designs)"})]}),S&&e.jsxs("div",{className:"mt-6 bg-gradient-to-br from-purple-50 to-blue-50 p-6 rounded-2xl border-2 border-purple-200",children:[e.jsx("p",{className:"text-sm font-bold text-gray-700 mb-4",children:"Customization Pricing (Extra charges)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(m,{label:"Front Print Price (EGP)",type:"number",value:O,onChange:s=>R(s.target.value),min:"0",placeholder:"50"}),e.jsx(m,{label:"Back Print Price (EGP)",type:"number",value:_,onChange:s=>$(s.target.value),min:"0",placeholder:"50"})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(W,{variant:"outline",type:"button",onClick:()=>j("/admin/products"),className:"px-6 py-3 border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 rounded-xl font-bold transition-all",children:"Cancel"}),e.jsxs(W,{type:"submit",isLoading:H,className:"px-8 py-3 bg-primary-900 hover:bg-black text-white rounded-xl font-bold shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center gap-2",children:[e.jsx(pe,{size:20}),o?"Update Product":"Create Product"]})]})})]})]})};export{ke as default};
