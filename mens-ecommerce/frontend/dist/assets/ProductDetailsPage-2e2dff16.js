import{r as l,j as e,L as O,Q as ee,s as W,F as se,a1 as z,a6 as X,a7 as J,a8 as te,e as ae,Y as _,X as re,S as Y,a9 as le,aa as ie,a4 as ne,h as ce,V as oe,ab as de,U as xe}from"./react-vendor-fdd07533.js";import{L as Z,a as Q,u as me,b as ge,c as K,d as he}from"./index-f5a8800a.js";import{ao as ue,aw as E}from"./vendor-28c12e7b.js";import{B as pe}from"./Button-30561157.js";const be=({productId:i})=>{const[v,c]=l.useState([]),[m,s]=l.useState(!0);return l.useEffect(()=>{i&&(async()=>{try{s(!0);const{data:d}=await Q.get(`/products/${i}/related`);c(d.data)}catch(d){console.error("Failed to fetch related products",d)}finally{s(!1)}})()},[i]),m?e.jsx(Z,{}):v.length===0?null:e.jsxs("div",{className:"mt-16 border-t pt-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"You may also like"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6",children:v.map(u=>{var d;return e.jsxs(O,{to:`/product/${u._id}`,className:"group relative block overflow-hidden rounded-xl bg-white border border-gray-100 hover:border-gray-200 shadow-sm hover:shadow-md transition-all",children:[e.jsx("div",{className:"relative h-[250px] sm:h-[300px] w-full bg-gray-100 overflow-hidden",children:e.jsx("img",{src:u.image,alt:u.name,className:"h-full w-full object-cover object-center transition-transform duration-500 group-hover:scale-105",loading:"lazy"})}),e.jsxs("div",{className:"relative p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 line-clamp-1 group-hover:text-primary-600 transition-colors",children:u.name}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["$",u.price]}),e.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:(d=u.category)==null?void 0:d.name})]})]})]},u._id)})})]})},ye=({isOpen:i,onClose:v,onSelect:c})=>{const[m,s]=l.useState([]),[u,d]=l.useState([]),[P,g]=l.useState(!1),[w,k]=l.useState(""),[S,j]=l.useState("Ø§Ù„ÙƒÙ„"),[h,y]=l.useState(null),T=["Ø§Ù„ÙƒÙ„","ØªÙŠØ´ÙŠØ±Øª","Ù‚Ù…ÙŠØµ","Ø¨Ù†Ø·Ù„ÙˆÙ†","Ø¬Ø§ÙƒÙŠØª","Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª","Ø£Ø®Ø±Ù‰"];l.useEffect(()=>{i&&D()},[i]),l.useEffect(()=>{$()},[m,w,S]);const D=async()=>{try{g(!0);const{data:a}=await ue.get("/api/designs",{params:{isActive:!0}});a.success&&s(a.data)}catch(a){console.error("Error fetching designs:",a),ee.error("ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØµØ§Ù…ÙŠÙ…")}finally{g(!1)}},$=()=>{let a=[...m];w.trim()&&(a=a.filter(f=>f.name.toLowerCase().includes(w.toLowerCase())||f.description.toLowerCase().includes(w.toLowerCase())||f.tags.some(F=>F.toLowerCase().includes(w.toLowerCase())))),S!=="Ø§Ù„ÙƒÙ„"&&(a=a.filter(f=>f.category===S)),d(a)},L=a=>{y(a)},I=()=>{h&&(c(h),C())},C=()=>{y(null),k(""),j("Ø§Ù„ÙƒÙ„"),v()};return i?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:C}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Ø§Ø®ØªØ± ØªØµÙ…ÙŠÙ…Ùƒ Ø§Ù„Ù…ÙØ¶Ù„"}),e.jsx("button",{onClick:C,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(W,{size:24})})]}),e.jsxs("div",{className:"sticky top-[73px] bg-gray-50 border-b border-gray-200 px-6 py-4 space-y-4 z-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† ØªØµÙ…ÙŠÙ…...",value:w,onChange:a=>k(a.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:T.map(a=>e.jsx("button",{onClick:()=>j(a),className:`px-4 py-2 rounded-lg whitespace-nowrap transition-all ${S===a?"bg-blue-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:a},a))})]}),e.jsx("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 250px)"},children:P?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})}):u.length===0?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØµØ§Ù…ÙŠÙ… Ù…ØªØ§Ø­Ø©"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Ø¬Ø±Ø¨ Ø§Ù„Ø¨Ø­Ø« Ø¨ÙƒÙ„Ù…Ø§Øª Ø£Ø®Ø±Ù‰ Ø£Ùˆ Ø§Ø®ØªØ± ÙØ¦Ø© Ù…Ø®ØªÙ„ÙØ©"})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:u.map(a=>e.jsxs("div",{onClick:()=>L(a),className:`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all hover:shadow-lg ${(h==null?void 0:h._id)===a._id?"border-blue-600 shadow-lg scale-105":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("div",{className:"aspect-square bg-gray-100",children:e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover"})}),(h==null?void 0:h._id)===a._id&&e.jsx("div",{className:"absolute top-2 left-2 bg-blue-600 text-white rounded-full p-2 shadow-lg",children:e.jsx(z,{size:20})}),e.jsxs("div",{className:"p-3 bg-white",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:a.category}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 mt-2",children:[a.price," Ø¬Ù†ÙŠÙ‡"]})]}),a.tags.length>0&&e.jsx("div",{className:"px-3 pb-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.slice(0,2).map((f,F)=>e.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:f},F))})})]},a._id))})}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("div",{className:"text-gray-600",children:h?e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:["Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ø®ØªØ§Ø±: ",h.name]}),e.jsxs("p",{className:"text-sm",children:["Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© ",h.price," Ø¬Ù†ÙŠÙ‡ Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬"]})]}):e.jsx("p",{children:"Ø§Ø®ØªØ± ØªØµÙ…ÙŠÙ… Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£Ø¹Ù„Ø§Ù‡"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:C,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsxs("button",{onClick:I,disabled:!h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(z,{size:20}),"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±"]})]})]})]})})]}):null},fe=({product:i,onAddToCart:v})=>{var A,G,B,M,U,V;const[c,m]=l.useState("plain"),[s,u]=l.useState("upload"),[d,P]=l.useState([]),[g,w]=l.useState(null),[k,S]=l.useState(!1),[j,h]=l.useState("front"),[y,T]=l.useState("medium"),[D,$]=l.useState(""),[L,I]=l.useState(""),[C,a]=l.useState(!1),f=()=>{var p,N,t,n,o,b;let r=i.price;return c==="custom"&&(s==="template"&&g&&(r+=g.price),j==="front"?r+=((p=i.customizationPricing)==null?void 0:p.frontPrint)||80:j==="back"?r+=((N=i.customizationPricing)==null?void 0:N.backPrint)||80:j==="both"&&(r+=((t=i.customizationPricing)==null?void 0:t.bothSides)||150),y==="small"?r+=((n=i.customizationPricing)==null?void 0:n.smallSize)||0:y==="medium"?r+=((o=i.customizationPricing)==null?void 0:o.mediumSize)||20:y==="large"&&(r+=((b=i.customizationPricing)==null?void 0:b.largeSize)||40)),r},F=async r=>{const p=r.target.files;if(!(!p||p.length===0)){if(d.length+p.length>5){alert("ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ 5 ØµÙˆØ± ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰");return}a(!0);try{const N=new FormData;Array.from(p).forEach(o=>{N.append("designImages",o)});const n=await(await fetch("http://localhost:5000/api/custom-orders/upload-images",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:N})).json();n.success?P([...d,...n.data]):alert("ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±")}catch(N){console.error("Error uploading images:",N),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±")}finally{a(!1)}}},q=r=>{P(d.filter((p,N)=>N!==r))},R=r=>{w(r)},H=()=>{if(c==="custom"){if(s==="upload"&&d.length===0){alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø±ÙØ¹ ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„ØªØµÙ…ÙŠÙ…");return}if(s==="template"&&!g){alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØªØµÙ…ÙŠÙ… Ù…Ù† Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©");return}}v({type:c,customization:c==="custom"?{designImages:s==="upload"?d:[],selectedDesign:s==="template"?g:null,printLocation:j,printSize:y,specialInstructions:D,designNotes:L}:null,totalPrice:f()})};return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 dark:text-white mb-6",children:"Product Options"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3",children:"Order Type:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>m("plain"),className:`p-4 rounded-xl border-2 transition-all ${c==="plain"?"border-primary-600 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Plain"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Buy as is"})]}),c==="plain"&&e.jsx(z,{className:"text-primary-600",size:20})]})}),e.jsx("button",{onClick:()=>m("custom"),className:`p-4 rounded-xl border-2 transition-all ${c==="custom"?"border-accent-600 bg-accent-50 dark:bg-accent-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:"Custom Design ðŸŽ¨"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upload your design"})]}),c==="custom"&&e.jsx(z,{className:"text-accent-600",size:20})]})})]})]}),c==="custom"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3",children:"Design Source"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{u("upload"),w(null)},className:`p-4 rounded-xl border-2 transition-all ${s==="upload"?"border-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(X,{})," Upload Design"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upload your own images"})]}),s==="upload"&&e.jsx(z,{className:"text-blue-600",size:20})]})}),e.jsx("button",{type:"button",onClick:()=>{u("template"),P([])},className:`p-4 rounded-xl border-2 transition-all ${s==="template"?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(J,{})," Choose Template"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Select from our designs"})]}),s==="template"&&e.jsx(z,{className:"text-purple-600",size:20})]})})]})]}),s==="upload"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3",children:"Upload Design Images (Max 5)"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-3",children:d.map((r,p)=>e.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden bg-gray-100",children:[e.jsx("img",{src:`http://localhost:5000${r.url}`,alt:`Design ${p+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>q(p),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(W,{size:16})})]},p))}),d.length<5&&e.jsxs("label",{className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer hover:border-primary-600 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*,.pdf",multiple:!0,onChange:F,className:"hidden",disabled:C}),e.jsx(X,{className:"text-gray-400"}),e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:C?"Uploading...":"Click to upload or drag & drop"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Accepted: JPG, PNG, GIF, PDF (Max 10MB each)"})]}),s==="template"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3",children:"Choose Design Template"}),g?e.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 border-2 border-purple-600",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:g.image,alt:g.name,className:"w-24 h-24 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:g.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:g.description}),e.jsxs("p",{className:"text-lg font-bold text-purple-600 mt-2",children:["+",g.price," EGP"]})]}),e.jsx("button",{type:"button",onClick:()=>S(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Change Design"})]})}):e.jsxs("button",{type:"button",onClick:()=>S(!0),className:"w-full p-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl hover:border-purple-600 transition-colors flex items-center justify-center gap-3",children:[e.jsx(J,{className:"text-gray-400",size:24}),e.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Click to browse design templates"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3",children:"Print Location"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"front",label:"Front Only",price:((A=i.customizationPricing)==null?void 0:A.frontPrint)||80},{value:"back",label:"Back Only",price:((G=i.customizationPricing)==null?void 0:G.backPrint)||80},{value:"both",label:"Both Sides",price:((B=i.customizationPricing)==null?void 0:B.bothSides)||150}].map(r=>e.jsxs("button",{onClick:()=>h(r.value),className:`p-3 rounded-lg border-2 transition-all ${j===r.value?"border-primary-600 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700"}`,children:[e.jsx("p",{className:"font-bold text-sm text-gray-900 dark:text-white",children:r.label}),e.jsxs("p",{className:"text-xs text-gray-500",children:["+",r.price," EGP"]})]},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3",children:"Print Size"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"small",label:"Small",size:"15x15 cm",price:((M=i.customizationPricing)==null?void 0:M.smallSize)||0},{value:"medium",label:"Medium",size:"20x20 cm",price:((U=i.customizationPricing)==null?void 0:U.mediumSize)||20},{value:"large",label:"Large",size:"30x30 cm",price:((V=i.customizationPricing)==null?void 0:V.largeSize)||40}].map(r=>e.jsxs("button",{onClick:()=>T(r.value),className:`p-3 rounded-lg border-2 transition-all ${y===r.value?"border-primary-600 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700"}`,children:[e.jsx("p",{className:"font-bold text-sm text-gray-900 dark:text-white",children:r.label}),e.jsx("p",{className:"text-xs text-gray-500",children:r.size}),e.jsxs("p",{className:"text-xs text-gray-500",children:["+",r.price," EGP"]})]},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Special Instructions for Printing"}),e.jsx("textarea",{value:D,onChange:r=>$(r.target.value),placeholder:"e.g., Please center the logo, make colors bright...",className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3,maxLength:500}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[D.length,"/500"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Additional Design Notes (Optional)"}),e.jsx("textarea",{value:L,onChange:r=>I(r.target.value),placeholder:"Any other details about your design...",className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:2,maxLength:1e3}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[L.length,"/1000"]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Base Price:"}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[i.price," EGP"]})]}),c==="custom"&&e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Print Cost:"}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["+",f()-i.price," EGP"]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-600 flex justify-between items-center",children:[e.jsx("span",{className:"font-black text-gray-900 dark:text-white",children:"Total:"}),e.jsxs("span",{className:"text-2xl font-black text-primary-600",children:[f()," EGP"]})]})]}),e.jsx(pe,{onClick:H,fullWidth:!0,className:"mt-6",disabled:c==="custom"&&(s==="upload"&&d.length===0||s==="template"&&!g),children:c==="custom"?"Order Custom Design ðŸŽ¨":"Add to Cart"}),e.jsx(ye,{isOpen:k,onClose:()=>S(!1),onSelect:R})]})},Se=()=>{var r,p,N;const{id:i}=te(),v=ae(),c=me(),{userInfo:m}=ge(t=>t.auth),[s,u]=l.useState(null),[d,P]=l.useState(!0),[g,w]=l.useState(""),[k,S]=l.useState(1),[j,h]=l.useState(""),[y,T]=l.useState(""),[D,$]=l.useState(""),[L,I]=l.useState(5),[C,a]=l.useState(""),[f,F]=l.useState(!1),[q,R]=l.useState(!1),[H,A]=l.useState(0);l.useEffect(()=>{(async()=>{var n,o;try{const{data:b}=await Q.get(`/products/${i}`),x=b.data||b;u(x),$(x.images&&x.images.length>0?x.images[0]:""),x.sizes&&x.sizes.length>0&&h(x.sizes[0]),x.colors&&x.colors.length>0&&T(x.colors[0]),G(x),A(Math.floor(Math.random()*20)+5),P(!1)}catch(b){w(((o=(n=b.response)==null?void 0:n.data)==null?void 0:o.message)||"Product not found"),P(!1)}})(),window.scrollTo(0,0)},[i]);const G=t=>{const o=JSON.parse(localStorage.getItem("recentlyViewed")||"[]").filter(x=>x._id!==t._id),b=[t,...o].slice(0,10);localStorage.setItem("recentlyViewed",JSON.stringify(b))},B=()=>{const t=new Date,n=t.getHours(),o=new Date(t);o.setDate(t.getDate()+1);const b=new Date(t);b.setDate(t.getDate()+2);const x={weekday:"long",month:"short",day:"numeric"};return n<14?`Tomorrow, ${o.toLocaleDateString("en-US",x)}`:`the day after, ${b.toLocaleDateString("en-US",x)}`},M=()=>{if(!s)return;c(K({_id:s._id,name:s.name,image:s.images&&s.images.length>0?s.images[0]:"",price:s.price,stock:s.stock,qty:k,size:j,color:y})),E.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",E.stopTimer),n.addEventListener("mouseleave",E.resumeTimer)}}).fire({icon:"success",title:`${s.name} added to cart`})},U=()=>{s&&(c(he(s._id)),E.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}).fire({icon:"success",title:"Added to wishlist"}))},V=async t=>{var n,o,b;t.preventDefault(),F(!0);try{await Q.post(`/products/${i}/reviews`,{rating:L,comment:C}),E.fire("Success","Review submitted successfully","success"),a(""),I(5)}catch(x){E.fire({icon:"warning",title:"Review Failed",text:((o=(n=x.response)==null?void 0:n.data)==null?void 0:o.message)||"Failed to submit review",footer:((b=x.response)==null?void 0:b.status)===403?'<a href="/shop">Continue Shopping</a>':void 0})}finally{F(!1)}};return d?e.jsx("div",{className:"min-h-screen flex justify-center items-center",children:e.jsx(Z,{size:"lg"})}):g?e.jsx("div",{className:"min-h-screen flex justify-center items-center text-red-500",children:g}):s?e.jsxs("div",{className:"bg-white dark:bg-[#1a1a1a] min-h-screen pb-20 transition-colors duration-300",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-[#252525] py-4 border-b border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"container mx-auto px-6 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(O,{to:"/",className:"hover:text-primary-900 dark:hover:text-white",children:"Home"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx(O,{to:"/shop",className:"hover:text-primary-900 dark:hover:text-white",children:"Shop"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium truncate",children:s.name})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-10",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 xl:gap-20",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-[3/4] bg-gray-100 rounded-3xl overflow-hidden group",children:[e.jsx("img",{src:D,alt:s.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),s.stock===0&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("span",{className:"bg-white text-gray-900 px-6 py-3 rounded-full font-black text-lg",children:"OUT OF STOCK"})})]}),s.images&&s.images.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-3",children:s.images.map((t,n)=>e.jsx("button",{onClick:()=>$(t),className:`aspect-square rounded-2xl overflow-hidden border-3 transition-all transform hover:scale-105 ${D===t?"border-primary-900 shadow-lg ring-2 ring-primary-200":"border-gray-200 hover:border-gray-400 opacity-70 hover:opacity-100"}`,children:e.jsx("img",{src:t,alt:"",className:"w-full h-full object-cover"})},n))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.stock>0?e.jsxs("span",{className:"inline-flex items-center text-xs font-bold text-green-600 bg-green-50 px-2 py-1 rounded",children:[e.jsx(z,{className:"mr-1"})," In Stock"]}):e.jsx("span",{className:"inline-flex items-center text-xs font-bold text-red-600 bg-red-50 px-2 py-1 rounded",children:"Out of Stock"}),e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-widest font-bold",children:((r=s.category)==null?void 0:r.name)||"Men"})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold font-display text-primary-900 mb-4",children:s.name}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:[s.price," EGP"]}),e.jsxs("div",{className:"flex items-center gap-1 text-accent-500",children:[e.jsx(_,{className:"fill-current"}),e.jsx(_,{className:"fill-current"}),e.jsx(_,{className:"fill-current"}),e.jsx(_,{className:"fill-current"}),e.jsx(_,{className:"opacity-50"}),e.jsx("span",{className:"text-gray-400 text-sm ml-2 font-medium",children:"(4.8 Reviews)"})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-6 animate-pulse",children:e.jsxs("div",{className:"bg-orange-100 text-orange-700 px-3 py-1.5 rounded-full flex items-center gap-2 text-xs font-black uppercase tracking-wider",children:[e.jsx(re,{size:14}),"Selling Fast: ",H," people bought this in the last 24h"]})}),e.jsx("p",{className:"text-gray-600 leading-relaxed mb-8 text-lg",children:s.description||"Experience premium quality with our meticulously crafted collection. Designed for the modern man who values both style and comfort."}),e.jsxs("div",{className:"bg-green-50 border border-green-100 rounded-xl p-4 mb-8 flex items-start gap-4",children:[e.jsx("div",{className:"bg-green-600 text-white p-2 rounded-lg",children:e.jsx(Y,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-green-900",children:"Elite Express Delivery"}),e.jsxs("p",{className:"text-xs text-green-700",children:["Order within the next ",e.jsx("span",{className:"font-bold",children:"3h 45m"})," to get it by ",e.jsx("span",{className:"underline font-bold text-green-900",children:B()})]})]})]}),(s.isCustomizable||s.allowCustomization)&&e.jsx(fe,{product:s,onAddToCart:t=>{const n={_id:s._id,name:s.name,image:s.images[0],price:t.totalPrice,qty:1,stock:s.stock,size:j,color:y,isCustomOrder:!0,customization:t.customization};c(K(n)),E.fire({icon:"success",title:"Added to Cart!",text:t.type==="custom"?"Your custom design has been added to cart. Proceed to checkout when ready!":"Product added to cart successfully!",confirmButtonText:"Go to Cart",showCancelButton:!0,cancelButtonText:"Continue Shopping"}).then(o=>{o.isConfirmed&&v("/cart")})}}),e.jsxs("div",{className:"space-y-8 border-t border-b border-gray-100 py-8 mb-8",children:[s.colors&&s.colors.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-black text-gray-900 mb-4 uppercase tracking-wider",children:["Color: ",e.jsx("span",{className:"text-gray-600 font-bold capitalize",children:y})]}),e.jsx("div",{className:"flex flex-wrap gap-4",children:s.colors.map(t=>e.jsxs("button",{onClick:()=>T(t),className:`group relative w-14 h-14 rounded-2xl border-3 flex items-center justify-center transition-all transform hover:scale-110 ${y===t?"border-primary-900 shadow-xl ring-4 ring-primary-100 scale-110":"border-gray-200 hover:border-gray-400 hover:shadow-lg"}`,title:t,children:[e.jsx("div",{className:"w-11 h-11 rounded-xl",style:{backgroundColor:t.toLowerCase()}}),y===t&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(z,{className:`text-2xl ${["white","yellow","cyan","silver"].includes(t.toLowerCase())?"text-gray-900":"text-white"} drop-shadow-lg`})})]},t))})]}),s.sizes&&s.sizes.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-900 uppercase tracking-wider",children:["Size: ",e.jsx("span",{className:"text-gray-600 font-bold",children:j})]}),e.jsx("button",{onClick:()=>R(!0),className:"text-xs text-primary-600 underline font-bold hover:text-primary-800 transition-colors",children:"Size Guide"})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:s.sizes.map(t=>e.jsx("button",{onClick:()=>h(t),className:`h-14 min-w-[56px] px-5 flex items-center justify-center rounded-2xl border-2 text-sm font-black transition-all transform hover:scale-105
                                                    ${j===t?"border-primary-900 bg-primary-900 text-white shadow-xl scale-105 ring-4 ring-primary-100":"border-gray-200 text-gray-700 hover:border-primary-900 hover:bg-primary-50 hover:shadow-lg"}
                                                `,children:t},t))})]})]}),!s.isCustomizable&&!s.allowCustomization&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-sm font-black text-gray-900 mb-3 uppercase tracking-wider",children:"Quantity"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 border-2 border-gray-200 rounded-2xl p-2",children:[e.jsx("button",{className:"w-11 h-11 flex items-center justify-center text-gray-700 hover:text-white hover:bg-primary-900 rounded-xl transition-all active:scale-95 disabled:opacity-30",onClick:()=>k>1&&S(k-1),disabled:k<=1,children:e.jsx(le,{size:16})}),e.jsx("span",{className:"w-12 text-center font-black text-lg text-gray-900",children:k}),e.jsx("button",{className:"w-11 h-11 flex items-center justify-center text-gray-700 hover:text-white hover:bg-primary-900 rounded-xl transition-all active:scale-95",onClick:()=>S(k+1),children:e.jsx(ie,{size:16})})]}),e.jsxs("button",{onClick:M,disabled:s.stock===0,className:`flex-1 h-[60px] flex items-center justify-center gap-3 rounded-2xl font-black text-base transition-all transform
                                        ${s.stock>0?"bg-primary-900 text-white hover:bg-black shadow-2xl hover:shadow-3xl hover:scale-105 active:scale-95":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[e.jsx(ne,{size:22}),s.stock>0?"Add to Cart":"Out of Stock"]}),e.jsx("button",{onClick:U,className:"h-[60px] w-[60px] flex items-center justify-center rounded-2xl border-3 border-gray-200 text-gray-600 hover:border-red-500 hover:bg-red-50 hover:text-red-500 transition-all transform hover:scale-110 active:scale-95 shadow-lg hover:shadow-xl",children:e.jsx(ce,{size:24})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs font-medium text-gray-500",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg flex flex-col items-center justify-center text-center gap-2",children:[e.jsx(Y,{size:20,className:"text-primary-900"}),e.jsx("span",{children:"Free Shipping"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg flex flex-col items-center justify-center text-center gap-2",children:[e.jsx(oe,{size:20,className:"text-primary-900"}),e.jsx("span",{children:"Free Returns"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg flex flex-col items-center justify-center text-center gap-2",children:[e.jsx(z,{size:20,className:"text-primary-900"}),e.jsx("span",{children:"Secure Checkout"})]})]})]})]}),e.jsxs("div",{className:"mt-20 border-t border-gray-200 pt-16",children:[e.jsx("h2",{className:"text-2xl font-bold font-display mb-8",children:"Customer Reviews"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Write a Review"}),m?e.jsxs("form",{onSubmit:V,className:"bg-gray-50 p-6 rounded-xl border border-gray-100",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),e.jsxs("select",{value:L,onChange:t=>I(Number(t.target.value)),className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 outline-none",children:[e.jsx("option",{value:"5",children:"5 - Excellent"}),e.jsx("option",{value:"4",children:"4 - Very Good"}),e.jsx("option",{value:"3",children:"3 - Good"}),e.jsx("option",{value:"2",children:"2 - Fair"}),e.jsx("option",{value:"1",children:"1 - Poor"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comment"}),e.jsx("textarea",{value:C,onChange:t=>a(t.target.value),className:"w-full p-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-primary-500 outline-none h-32",placeholder:"Share your experience...",required:!0})]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-primary-900 text-white py-3 rounded-lg font-bold hover:bg-black transition-colors disabled:opacity-50",children:f?"Submitting...":"Submit Review"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 flex items-center gap-1",children:[e.jsx(z,{className:"text-green-500"})," Only verified purchasers can leave reviews."]})]}):e.jsxs("div",{className:"bg-gray-50 p-8 rounded-xl text-center border border-gray-100",children:[e.jsx(de,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to write a review."}),e.jsx(O,{to:"/login",className:"text-primary-600 font-bold hover:underline",children:"Log In Here"})]})]}),e.jsxs("div",{className:"space-y-6",children:[((p=s==null?void 0:s.reviews)==null?void 0:p.length)===0&&e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-xl",children:e.jsx("p",{className:"text-gray-500",children:"No reviews yet. Be the first to review!"})}),(N=s==null?void 0:s.reviews)==null?void 0:N.map(t=>e.jsxs("div",{className:"border-b border-gray-100 pb-6 last:border-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold",children:t.name.charAt(0)}),e.jsx("span",{className:"font-bold text-gray-900",children:t.name})]}),e.jsx("div",{className:"flex text-yellow-400 text-sm",children:[...Array(5)].map((n,o)=>e.jsx(_,{className:o<t.rating?"fill-current":"text-gray-300"},o))})]}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:t.comment}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(t.createdAt).toLocaleDateString()})]},t._id))]})]})]}),s&&e.jsx(be,{productId:s._id}),e.jsx(je,{currentId:s._id}),q&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl overflow-hidden shadow-2xl animate-scale-up",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900 uppercase",children:"Size Guide"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Find your perfect fit for Topia garments"})]}),e.jsx("button",{onClick:()=>R(!1),className:"w-10 h-10 rounded-full hover:bg-white flex items-center justify-center text-gray-400 hover:text-red-500 shadow-sm transition-all",children:e.jsx(W,{size:20})})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-primary-900 text-xs font-black uppercase tracking-widest text-primary-900",children:[e.jsx("th",{className:"py-4",children:"Size"}),e.jsx("th",{className:"py-4",children:"Chest (cm)"}),e.jsx("th",{className:"py-4",children:"Waist (cm)"}),e.jsx("th",{className:"py-4",children:"Length (cm)"})]})}),e.jsx("tbody",{className:"text-sm text-gray-600",children:[{s:"S",c:"96-101",w:"81-86",l:"70"},{s:"M",c:"101-106",w:"86-91",l:"72"},{s:"L",c:"106-111",w:"91-96",l:"74"},{s:"XL",c:"111-116",w:"96-101",l:"76"},{s:"XXL",c:"116-121",w:"101-106",l:"78"}].map((t,n)=>e.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 font-bold text-primary-900",children:t.s}),e.jsx("td",{className:"py-4",children:t.c}),e.jsx("td",{className:"py-4",children:t.w}),e.jsx("td",{className:"py-4",children:t.l})]},n))})]}),e.jsxs("div",{className:"mt-8 p-4 bg-primary-50 rounded-xl flex gap-4 items-start",children:[e.jsx(xe,{className:"text-primary-900 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-primary-900",children:"Elite Fitting Guarantee"}),e.jsx("p",{className:"text-xs text-primary-700",children:"Not the right fit? Exchange it for free within 14 days. No questions asked."})]})]})]})]})})]})]}):null},je=({currentId:i})=>{const[v,c]=l.useState([]);return l.useEffect(()=>{const m=JSON.parse(localStorage.getItem("recentlyViewed")||"[]");c(m.filter(s=>s._id!==i).slice(0,4))},[i]),v.length===0?null:e.jsxs("div",{className:"mt-20",children:[e.jsx("h2",{className:"text-2xl font-bold font-display mb-8",children:"Recently Viewed"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:v.map(m=>e.jsxs(O,{to:`/product/${m._id}`,className:"group block",children:[e.jsx("div",{className:"aspect-[3/4] rounded-xl overflow-hidden bg-gray-100 mb-3 shadow-sm group-hover:shadow-md transition-all",children:e.jsx("img",{src:m.images[0],alt:m.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),e.jsx("h3",{className:"text-sm font-bold text-primary-900 group-hover:text-primary-600 truncate",children:m.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.price," EGP"]})]},m._id))})]})};export{Se as default};
