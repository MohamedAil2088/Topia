import{r as l,j as e,aM as R,ac as j,o as O,aa as F,al as W,ar as q,ae as U,ai as Y}from"./react-vendor-fdd07533.js";import{B as _}from"./Button-30561157.js";import{I as G}from"./Input-fc81ecfd.js";import{L as B,a as m}from"./index-f5a8800a.js";import{aw as d}from"./vendor-28c12e7b.js";const H=Y(d),Z=()=>{const[i,o]=l.useState([]),[A,y]=l.useState(!0),[N,v]=l.useState(""),[h,w]=l.useState(""),[C,k]=l.useState(""),[p,S]=l.useState(!1),[u,E]=l.useState(null),[L,b]=l.useState(null),[f,c]=l.useState(""),[D,x]=l.useState(""),z=async()=>{var s,t;y(!0),v("");try{const{data:a}=await m.get("/categories");o(a.data||a)}catch(a){v(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to load categories"),console.error(a)}finally{y(!1)}};l.useEffect(()=>{z()},[]);const I=async s=>{var t,a;if(s.preventDefault(),!!h.trim()){S(!0);try{const{data:r}=await m.post("/categories",{name:h.trim(),description:C.trim()||void 0});o([...i,r.data||r]),w(""),k(""),d.fire({icon:"success",title:"Category Added!",text:"The category has been successfully created.",timer:1500,showConfirmButton:!1})}catch(r){d.fire("Error",((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to add category","error"),console.error(r)}finally{S(!1)}}},T=s=>{b(s._id),c(s.name),x(s.description||"")},P=async s=>{var t,a;if(f.trim())try{const{data:r}=await m.put(`/categories/${s}`,{name:f.trim(),description:D.trim()||void 0});o(i.map(n=>n._id===s?r.data||r:n)),b(null),c(""),x(""),d.fire({icon:"success",title:"Updated!",text:"Category has been updated successfully.",timer:1500,showConfirmButton:!1})}catch(r){d.fire("Error",((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to update category","error")}},$=()=>{b(null),c(""),x("")},M=async(s,t)=>{var r,n;if((await H.fire({title:`Delete "${t}"?`,text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed){E(s);try{await m.delete(`/categories/${s}`),o(i.filter(g=>g._id!==s)),d.fire("Deleted!","Category has been deleted.","success")}catch(g){d.fire("Error",((n=(r=g.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete category","error"),console.error(g)}finally{E(null)}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black font-display text-gray-900 mb-1",children:"Categories Management"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Organize your products into categories"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-500 text-white p-3 rounded-lg",children:e.jsx(R,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-600 font-bold uppercase tracking-wide",children:"Total Categories"}),e.jsx("p",{className:"text-2xl font-black text-blue-900",children:i.length})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-500 text-white p-3 rounded-lg",children:e.jsx(j,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600 font-bold uppercase tracking-wide",children:"Active"}),e.jsx("p",{className:"text-2xl font-black text-green-900",children:i.length})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-purple-500 text-white p-3 rounded-lg",children:e.jsx(O,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-600 font-bold uppercase tracking-wide",children:"With Description"}),e.jsx("p",{className:"text-2xl font-black text-purple-900",children:i.filter(s=>s.description).length})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 sticky top-24",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-green-100 text-green-600 p-3 rounded-xl",children:e.jsx(F,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-gray-900",children:"Add Category"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Create a new category"})]})]}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsx(G,{label:"Category Name",value:h,onChange:s=>w(s.target.value),placeholder:"e.g. Shoes, Shirts, Pants",required:!0,disabled:p}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:ring-4 focus:ring-primary-100 focus:border-primary-900 outline-none transition-all h-24 resize-none font-medium",value:C,onChange:s=>k(s.target.value),placeholder:"Brief description...",disabled:p})]}),e.jsxs(_,{type:"submit",fullWidth:!0,isLoading:p,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:scale-105",children:[e.jsx(F,{className:"inline mr-2"})," Add Category"]})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:A?e.jsx("div",{className:"bg-white rounded-2xl p-12 flex justify-center border border-gray-100",children:e.jsx(B,{size:"lg"})}):N?e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6 flex items-start gap-3",children:[e.jsx(W,{className:"text-red-500 mt-0.5",size:20}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Error Loading Categories"}),e.jsx("p",{className:"text-red-700 text-sm",children:N}),e.jsx(_,{onClick:z,variant:"outline",className:"mt-3",children:"Retry"})]})]}):i.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-gray-100",children:[e.jsx(j,{className:"mx-auto text-gray-300 mb-4",size:64}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No categories yet. Add your first category!"})]}):e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase tracking-wider",children:"Slug"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-black text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:i.map(s=>e.jsx("tr",{className:"hover:bg-gray-50 transition-colors group",children:L===s._id?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4",colSpan:3,children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:f,onChange:t=>c(t.target.value),className:"w-full px-4 py-2 rounded-xl border-2 border-blue-300 focus:ring-4 focus:ring-blue-100 focus:border-blue-500 outline-none font-bold",placeholder:"Category name"}),e.jsx("textarea",{value:D,onChange:t=>x(t.target.value),className:"w-full px-4 py-2 rounded-xl border-2 border-blue-300 focus:ring-4 focus:ring-blue-100 focus:border-blue-500 outline-none resize-none h-20",placeholder:"Description (optional)"})]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>P(s._id),className:"px-4 py-2 bg-blue-600 text-white rounded-xl font-bold text-sm hover:bg-blue-700 transition-all transform hover:scale-105 shadow-lg",children:"Save"}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-xl font-bold text-sm hover:bg-gray-300 transition-all",children:"Cancel"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg",children:e.jsx(j,{size:18})}),e.jsx("span",{className:"font-black text-gray-900",children:s.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("code",{className:"bg-gray-100 px-3 py-1.5 rounded-lg text-xs font-bold text-gray-700 border border-gray-200",children:s.slug})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 max-w-xs",children:s.description||e.jsx("span",{className:"text-gray-400 italic",children:"No description"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs("button",{onClick:()=>T(s),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-xl transition-all font-bold text-sm border-2 border-blue-200 hover:border-blue-300 hover:shadow-md transform hover:scale-105",title:"Edit",children:[e.jsx(q,{size:16})," Edit"]}),e.jsx("button",{onClick:()=>M(s._id,s.name),disabled:u===s._id,className:`inline-flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 hover:bg-red-100 rounded-xl transition-all font-bold text-sm border-2 border-red-200 hover:border-red-300 hover:shadow-md transform hover:scale-105 ${u===s._id?"opacity-50 cursor-not-allowed":""}`,title:"Delete",children:u===s._id?e.jsx(B,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(U,{size:16})," Delete"]})})]})})]})},s._id))})]})})})})]})]})};export{Z as default};
