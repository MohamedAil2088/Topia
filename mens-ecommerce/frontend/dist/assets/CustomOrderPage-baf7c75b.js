import{e as k,Z as z,r,j as e,W as C,ay as P,a1 as q,az as E,o as F,aA as L,aB as T}from"./react-vendor-fdd07533.js";import{b as O,a as g,L as X}from"./index-f5a8800a.js";import{aw as d}from"./vendor-28c12e7b.js";const G=()=>{const x=k(),[m]=z(),{userInfo:f}=O(s=>s.auth),[a,u]=r.useState(null),[n,j]=r.useState([]),[v,h]=r.useState(!1),[b,p]=r.useState(!1),[t,l]=r.useState({customText:"",size:"M",quantity:1,color:"Black",additionalNotes:""});r.useEffect(()=>{N()},[]),r.useEffect(()=>{const s=m.get("design");if(s&&n.length>0){const i=n.find(c=>c._id===s);i&&u(i)}},[m,n]);const N=async()=>{h(!0);try{const{data:s}=await g.get("/designs");s.success&&j(s.data)}catch(s){console.error("Failed to fetch designs",s)}finally{h(!1)}},y=async s=>{var i,c;if(s.preventDefault(),!a){d.fire("Error","Please select a design","error");return}if(!f){d.fire({title:"Login Required",text:"Please login to place a custom order",icon:"warning",confirmButtonText:"Go to Login"}).then(o=>{o.isConfirmed&&x("/login")});return}p(!0);try{const o={design:a._id,customText:t.customText,size:t.size,quantity:t.quantity,color:t.color,additionalNotes:t.additionalNotes,estimatedPrice:a.price*t.quantity};await g.post("/custom-orders",o),d.fire({title:"Success!",html:`
                    <div class="text-center">
                        <div class="text-6xl mb-4">ðŸŽ‰</div>
                        <p class="text-lg">Your custom order has been submitted!</p>
                        <p class="text-sm text-gray-600 mt-2">We'll review it and get back to you soon.</p>
                    </div>
                `,icon:"success",confirmButtonText:"View My Orders"}).then(S=>{S.isConfirmed&&x("/custom-orders/my-orders")})}catch(o){d.fire("Error",((c=(i=o.response)==null?void 0:i.data)==null?void 0:c.message)||"Failed to submit order","error")}finally{p(!1)}},w=a?a.price*t.quantity:0;return v?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(X,{size:"lg"})}):e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:[e.jsx("title",{children:"Custom Order - Topia Men's Store"}),e.jsx("meta",{name:"description",content:"Create your personalized custom order with your favorite design"})]}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 py-12",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-5xl font-black text-gray-900 mb-4",children:["âœ¨ Create Your ",e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Custom Order"})]}),e.jsx("p",{className:"text-xl text-gray-600",children:"Design your perfect piece with our premium customization service"})]}),e.jsx("form",{onSubmit:y,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-100 to-purple-100 p-3 rounded-xl",children:e.jsx(P,{size:24,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900",children:"Select Design"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Choose from our premium collection"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:n.map(s=>e.jsxs("div",{onClick:()=>u(s),className:`relative cursor-pointer rounded-xl overflow-hidden border-4 transition-all transform hover:scale-105 ${(a==null?void 0:a._id)===s._id?"border-blue-600 ring-4 ring-blue-200":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-40 object-cover"}),(a==null?void 0:a._id)===s._id&&e.jsx("div",{className:"absolute top-2 right-2 bg-blue-600 text-white rounded-full p-2",children:e.jsx(q,{size:16})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:[e.jsx("p",{className:"text-white font-bold text-sm",children:s.name}),e.jsxs("p",{className:"text-white/90 text-xs",children:[s.price," EGP"]})]})]},s._id))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-100 to-pink-100 p-3 rounded-xl",children:e.jsx(E,{size:24,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900",children:"Customization"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Personalize your order"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Custom Text (Optional)"}),e.jsx("input",{type:"text",value:t.customText,onChange:s=>l({...t,customText:s.target.value}),placeholder:"Enter your custom text...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-600 outline-none transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:[e.jsx(F,{className:"inline mr-2",size:16}),"Size"]}),e.jsxs("select",{value:t.size,onChange:s=>l({...t,size:s.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-600 outline-none transition-all font-medium",children:[e.jsx("option",{value:"XS",children:"XS"}),e.jsx("option",{value:"S",children:"S"}),e.jsx("option",{value:"M",children:"M"}),e.jsx("option",{value:"L",children:"L"}),e.jsx("option",{value:"XL",children:"XL"}),e.jsx("option",{value:"XXL",children:"XXL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Color"}),e.jsxs("select",{value:t.color,onChange:s=>l({...t,color:s.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-600 outline-none transition-all font-medium",children:[e.jsx("option",{value:"Black",children:"âš« Black"}),e.jsx("option",{value:"White",children:"âšª White"}),e.jsx("option",{value:"Navy",children:"ðŸ”µ Navy"}),e.jsx("option",{value:"Gray",children:"âšª Gray"}),e.jsx("option",{value:"Red",children:"ðŸ”´ Red"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Quantity"}),e.jsx("input",{type:"number",min:"1",max:"100",value:t.quantity,onChange:s=>l({...t,quantity:parseInt(s.target.value)||1}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-600 outline-none transition-all font-medium"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{value:t.additionalNotes,onChange:s=>l({...t,additionalNotes:s.target.value}),placeholder:"Any special requests or requirements...",rows:4,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-600 outline-none transition-all resize-none"})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl shadow-2xl p-6 text-white sticky top-24",children:[e.jsxs("h3",{className:"text-2xl font-black mb-6 flex items-center gap-2",children:[e.jsx(L,{size:28}),"Order Summary"]}),a?e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4",children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsx("p",{className:"font-bold text-lg",children:a.name})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/80",children:"Base Price:"}),e.jsxs("span",{className:"font-bold",children:[a.price," EGP"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/80",children:"Quantity:"}),e.jsxs("span",{className:"font-bold",children:["Ã— ",t.quantity]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/80",children:"Size:"}),e.jsx("span",{className:"font-bold",children:t.size})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/80",children:"Color:"}),e.jsx("span",{className:"font-bold",children:t.color})]})]}),e.jsx("div",{className:"border-t border-white/20 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xl font-bold",children:"Estimated Total:"}),e.jsxs("span",{className:"text-3xl font-black",children:[w," ",e.jsx("span",{className:"text-lg",children:"EGP"})]})]})})]}):e.jsx("div",{className:"text-center py-8 text-white/60",children:e.jsx("p",{children:"Please select a design"})}),e.jsxs("button",{type:"submit",disabled:!a||b,className:"w-full bg-white hover:bg-gray-100 text-blue-600 font-black py-4 px-6 rounded-xl transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e.jsx(T,{className:"inline mr-2",size:20}),b?"Submitting...":"Place Custom Order"]}),e.jsx("p",{className:"text-xs text-white/60 mt-4 text-center",children:"* Final price will be confirmed after review"})]})})]})})]})})]})};export{G as default};
