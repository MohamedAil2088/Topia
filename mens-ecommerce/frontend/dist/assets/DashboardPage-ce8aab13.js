import{r as i,j as e,aD as g,aA as p,k as b,am as j,av as y,aj as f,L as u,X as N}from"./react-vendor-fdd07533.js";import{L as k,a as v}from"./index-f5a8800a.js";import{R as w,A as S,C as P,X as C,Y as F,T as L,a as A}from"./charts-a207b825.js";import"./vendor-28c12e7b.js";const d=({title:s,value:n,icon:c,color:l,trend:t})=>e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:s}),e.jsx("h3",{className:"text-3xl font-extrabold text-gray-900 dark:text-white mb-2",children:n}),t&&e.jsxs("p",{className:"text-sm text-green-600 flex items-center gap-1",children:[e.jsx(N,{size:14}),e.jsx("span",{className:"font-semibold",children:t})]})]}),e.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-white shadow-lg ${l}`,children:e.jsx(c,{size:28})})]})}),z=()=>{const[s,n]=i.useState(null),[c,l]=i.useState(!0),[t,h]=i.useState("");i.useEffect(()=>{(async()=>{var r,o;try{const{data:x}=await v.get("/admin/stats");n(x.data),l(!1)}catch(x){h(((o=(r=x.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to load stats"),l(!1)}})()},[]);const m=(s==null?void 0:s.monthlySales.map(a=>({name:`${a._id.month}/${a._id.year}`,sales:a.total})))||[];return c?e.jsx("div",{className:"flex justify-center items-center h-screen -mt-24",children:e.jsxs("div",{className:"text-center",children:[e.jsx(k,{size:"lg"}),e.jsx("p",{className:"text-gray-500 mt-4 animate-pulse",children:"Loading Analytics..."})]})}):t?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 flex flex-col items-center justify-center text-center",children:[e.jsx(g,{size:48,className:"text-red-400 mb-4"}),e.jsx("p",{className:"text-red-700 font-bold text-lg mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-red-600",children:t}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Try Again"})]}):e.jsxs("div",{className:"space-y-8 pb-12",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold font-display text-gray-900 dark:text-white uppercase italic tracking-tighter",children:"Command Center"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 uppercase text-[10px] font-black tracking-[0.2em]",children:"Real-time brand performance and elite metrics."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{title:"Revenue",value:`${Number(s==null?void 0:s.totalSales).toLocaleString()} EGP`,icon:p,color:"bg-green-500",trend:"+12% from last month"}),e.jsx(d,{title:"Orders",value:(s==null?void 0:s.totalOrders)||0,icon:b,color:"bg-blue-500",trend:"+5% from last month"}),e.jsx(d,{title:"Products",value:(s==null?void 0:s.totalProducts)||0,icon:j,color:"bg-orange-500"}),e.jsx(d,{title:"Customers",value:(s==null?void 0:s.totalUsers)||0,icon:y,color:"bg-purple-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 text-gray-900 dark:text-white",children:[e.jsx("h3",{className:"font-bold text-xl uppercase tracking-tighter",children:"Sales Performance"}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("span",{className:"flex items-center gap-2 text-xs font-bold",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full"})," This Year"]})})]}),e.jsx("div",{className:"h-[350px] w-full",children:e.jsx(w,{width:"100%",height:"100%",children:e.jsxs(S,{data:m,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.15}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),e.jsx(P,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),e.jsx(C,{dataKey:"name",stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(F,{stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:a=>`${a/1e3}k`}),e.jsx(L,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgba(0,0,0,0.1)"}}),e.jsx(A,{type:"monotone",dataKey:"sales",stroke:"#3b82f6",strokeWidth:3,fillOpacity:1,fill:"url(#colorSales)"})]})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white mb-6",children:"Loyalty Tiers"}),e.jsx("div",{className:"space-y-4",children:s==null?void 0:s.tierDistribution.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-900 rounded-2xl",children:[e.jsx("span",{className:"text-xs font-black uppercase text-gray-500 tracking-widest",children:a._id||"Standard"}),e.jsx("span",{className:"text-lg font-black text-primary-900 dark:text-white",children:a.count})]},a._id))})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-accent-50 flex items-center justify-center text-accent-600",children:e.jsx(g,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:"Elite Packaging"}),e.jsxs("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:[(((s==null?void 0:s.elitePackagingStats.count)||0)/((s==null?void 0:s.totalOrders)||1)*100).toFixed(1),"% Adoption"]})]})]}),e.jsxs("p",{className:"text-xl font-black text-primary-900 dark:text-white",children:[s==null?void 0:s.elitePackagingStats.total.toFixed(2)," EGP ",e.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest ml-1",children:"Revenue"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-gray-50 dark:border-gray-700 flex items-center justify-between bg-gray-50/50 dark:bg-gray-900/50",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-900 dark:text-white flex items-center gap-2 uppercase tracking-tighter",children:[e.jsx(f,{className:"text-blue-500"})," Latest Orders Feed"]}),e.jsx(u,{to:"/admin/orders",className:"text-[10px] font-black uppercase tracking-widest text-blue-600 hover:underline",children:"Full Report â†’"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-white dark:bg-gray-800 text-gray-400 text-[10px] uppercase font-bold tracking-widest",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-4",children:"ID"}),e.jsx("th",{className:"px-8 py-4",children:"Client"}),e.jsx("th",{className:"px-8 py-4",children:"Revenue"}),e.jsx("th",{className:"px-8 py-4",children:"Payment"}),e.jsx("th",{className:"px-8 py-4",children:"Delivery"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50 dark:divide-gray-700",children:s==null?void 0:s.recentOrders.map(a=>{var r;return e.jsxs("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("td",{className:"px-8 py-5 text-xs font-mono text-gray-400",children:["#",a._id.slice(-6).toUpperCase()]}),e.jsx("td",{className:"px-8 py-5 font-bold text-gray-900 dark:text-white",children:((r=a.user)==null?void 0:r.name)||"Guest"}),e.jsxs("td",{className:"px-8 py-5 font-bold text-gray-900 dark:text-white",children:[a.totalPrice.toFixed(2)," EGP"]}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-bold uppercase ${a.isPaid?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.isPaid?"Paid":"Unpaid"})}),e.jsx("td",{className:"px-8 py-5 font-bold text-gray-600 dark:text-gray-400",children:a.isDelivered?"Delivered":"Processing"})]},a._id)})})]})})]})]})};export{z as default};
