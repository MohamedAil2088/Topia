import{r as n,j as e,p as _,a5 as F,aE as M,o as A,s as U}from"./react-vendor-fdd07533.js";import{a as x,L as R}from"./index-f5a8800a.js";import{B as q}from"./Button-30561157.js";import"./vendor-28c12e7b.js";const V=()=>{var h,b,u,j,y,f,N;const[p,k]=n.useState([]),[c,S]=n.useState(null),[z,C]=n.useState(!0),[d,P]=n.useState("all"),[t,m]=n.useState(null),[I,o]=n.useState(!1),E=["all","pending","reviewing","approved","in-design","printing","completed","shipped","delivered","cancelled"];n.useEffect(()=>{g(),$()},[d]);const g=async()=>{try{const{data:s}=await x.get(`/ custom - orders / admin / all ? status = ${d==="all"?"":d} `);k(s.data||[])}catch(s){console.error("Error fetching orders:",s)}finally{C(!1)}},$=async()=>{try{const{data:s}=await x.get("/custom-orders/admin/stats");S(s.data)}catch(s){console.error("Error fetching stats:",s)}},D=async(s,a,r="")=>{try{await x.put(`/ custom - orders / ${s}/status`,{status:a,note:r}),g(),o(!1)}catch(l){console.error("Error updating status:",l),alert("Failed to update status")}},O=s=>({pending:"bg-yellow-100 text-yellow-800",reviewing:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800","in-design":"bg-purple-100 text-purple-800",printing:"bg-indigo-100 text-indigo-800",completed:"bg-green-100 text-green-800",shipped:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800";return z?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(R,{size:"lg"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-6 rounded-2xl shadow-sm mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black font-display text-gray-900 flex items-center gap-3",children:"Custom Orders Management ðŸŽ¨"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage all custom design orders"})]}),e.jsxs(q,{onClick:()=>window.location.href="/admin/settings",variant:"outline",className:"flex items-center gap-2 border-gray-300 text-gray-700 hover:bg-gray-50 bg-white",children:[e.jsx(_,{})," Settings"]})]}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white",children:[e.jsx("p",{className:"text-blue-100 text-sm mb-2",children:"Total Orders"}),e.jsx("p",{className:"text-4xl font-black",children:c.totalOrders})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 text-white",children:[e.jsx("p",{className:"text-green-100 text-sm mb-2",children:"Total Revenue"}),e.jsx("p",{className:"text-4xl font-black",children:c.totalRevenue.toLocaleString()}),e.jsx("p",{className:"text-green-100 text-xs",children:"EGP"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl p-6 text-white",children:[e.jsx("p",{className:"text-yellow-100 text-sm mb-2",children:"Pending"}),e.jsx("p",{className:"text-4xl font-black",children:((h=c.byStatus.find(s=>s._id==="pending"))==null?void 0:h.count)||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white",children:[e.jsx("p",{className:"text-purple-100 text-sm mb-2",children:"In Progress"}),e.jsx("p",{className:"text-4xl font-black",children:(((b=c.byStatus.find(s=>s._id==="in-design"))==null?void 0:b.count)||0)+(((u=c.byStatus.find(s=>s._id==="printing"))==null?void 0:u.count)||0)})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:E.map(s=>e.jsx("button",{onClick:()=>P(s),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition-all ${d===s?"bg-gray-900 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.replace("-"," ").toUpperCase()},s))})}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase",children:"Order ID"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase",children:"Customer"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase",children:"Product"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase",children:"Designs"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase",children:"Price"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-black text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map(s=>{var a,r,l,i,v;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("p",{className:"font-mono text-sm font-bold",children:["#",s._id.slice(-8).toUpperCase()]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:(a=s.user)==null?void 0:a.name}),e.jsx("p",{className:"text-xs text-gray-500",children:(r=s.user)==null?void 0:r.email})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:(l=s.product)==null?void 0:l.images[0],alt:(i=s.product)==null?void 0:i.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:(v=s.product)==null?void 0:v.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.size," | ",s.color]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-1",children:[s.customization.designImages.slice(0,2).map((L,w)=>e.jsx("img",{src:`http://localhost:5000${L.url}`,alt:`Design ${w+1}`,className:"w-10 h-10 object-cover rounded border border-gray-200"},w)),s.customization.designImages.length>2&&e.jsxs("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center text-xs font-bold text-gray-600",children:["+",s.customization.designImages.length-2]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("p",{className:"font-black text-gray-900",children:[s.pricing.totalPrice," EGP"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${O(s.status)}`,children:s.status.replace("-"," ").toUpperCase()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-600",children:new Date(s.createdAt).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{m(s),o(!0)},className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"View Details",children:e.jsx(F,{})}),e.jsx("button",{onClick:()=>{m(s),o(!0)},className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Update Status",children:e.jsx(M,{})})]})})]},s._id)})})]})}),p.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{className:"mx-auto text-gray-300 mb-4",size:48}),e.jsx("p",{className:"text-gray-500",children:"No orders found"})]})]}),I&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-2xl font-black",children:"Order Details"}),e.jsx("button",{onClick:()=>o(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(U,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-gray-900 mb-3",children:"Customer Information"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Name:"})," ",e.jsx("span",{className:"font-semibold",children:(j=t.user)==null?void 0:j.name})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Email:"})," ",e.jsx("span",{className:"font-semibold",children:(y=t.user)==null?void 0:y.email})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Phone:"})," ",e.jsx("span",{className:"font-semibold",children:(f=t.shippingAddress)==null?void 0:f.phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-gray-900 mb-3",children:"Product Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Product:"})," ",e.jsx("span",{className:"font-semibold",children:(N=t.product)==null?void 0:N.name})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Size:"})," ",e.jsx("span",{className:"font-semibold",children:t.size})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Color:"})," ",e.jsx("span",{className:"font-semibold",children:t.color})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Quantity:"})," ",e.jsx("span",{className:"font-semibold",children:t.quantity})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-black text-gray-900 mb-3",children:["Design Images (",t.customization.designImages.length,")"]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:t.customization.designImages.map((s,a)=>e.jsx("a",{href:`http://localhost:5000${s.url}`,target:"_blank",rel:"noopener noreferrer",className:"aspect-square rounded-lg overflow-hidden border-2 border-gray-200 hover:border-primary-600 transition-colors",children:e.jsx("img",{src:`http://localhost:5000${s.url}`,alt:`Design ${a+1}`,className:"w-full h-full object-cover"})},a))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-gray-900 mb-3",children:"Print Specifications"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Location:"})," ",e.jsx("span",{className:"font-semibold uppercase",children:t.customization.printLocation})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Size:"})," ",e.jsx("span",{className:"font-semibold uppercase",children:t.customization.printSize})]})]})]}),t.customization.specialInstructions&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-gray-900 mb-3",children:"Special Instructions"}),e.jsx("p",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 text-sm",children:t.customization.specialInstructions})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-gray-900 mb-3",children:"Workflow Progression"}),e.jsx("div",{className:"flex gap-2 flex-wrap bg-gray-50 p-4 rounded-xl border border-gray-100 items-center",children:["pending","reviewing","approved","in-design","printing","completed","shipped","delivered"].map((s,a)=>{const r=["pending","reviewing","approved","in-design","printing","completed","shipped","delivered"].indexOf(t.status),l=a<r,i=a===r;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>D(t._id,s,`Moveto to ${s}`),disabled:i,className:`
                                                        relative px-4 py-2 rounded-lg font-bold text-xs transition-all uppercase tracking-wider
                                                        ${i?"bg-gray-900 text-white shadow-lg scale-105 z-10 ring-2 ring-offset-2 ring-gray-900":l?"bg-green-50 text-green-700 border border-green-200 opacity-80 hover:opacity-100 hover:bg-green-100":"bg-white border border-gray-200 text-gray-400 hover:border-gray-900 hover:text-gray-900"}
                                                    `,children:s.replace("-"," ")}),a<7&&e.jsx("div",{className:`w-4 h-0.5 mx-1 ${l?"bg-green-200":"bg-gray-200"}`})]},s)})})]})]})]})})]})};export{V as default};
